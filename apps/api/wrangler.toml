name = "word-of-the-day-api"
main = "src/index.ts"
compatibility_date = "2024-07-25"
nodejs_compat = true

[vars]
APP_ENV = "development"
CORS_ALLOW_ORIGIN = "http://localhost:5173"
SESSION_TTL_DAYS = "30"
SESSION_COOKIE_SAMESITE = "Lax"
COOKIE_SECURE = "false"
VAPID_SUBJECT = "mailto:hello@example.com"

[triggers]
crons = ["* * * * *"]

[[d1_databases]]
binding = "DB"
database_name = "word_of_the_day"
database_id = "64dfba7a-5c38-4dcb-b111-ebe6f89f4d33"
migrations_dir = "migrations"

[[kv_namespaces]]
binding = "KV"
id = "09c68a2322be4cab9ef0dc751895ab7f"

# =============================================================================
# Production Environment
# =============================================================================
# Deploy with: wrangler deploy --env production
# Set secrets with: wrangler secret put <NAME> --env production

[env.production.vars]
APP_ENV = "production"
CORS_ALLOW_ORIGIN = "https://lexi.twoplustwoone.dev"
SESSION_TTL_DAYS = "30"
SESSION_COOKIE_SAMESITE = "Lax"
COOKIE_SECURE = "true"
VAPID_SUBJECT = "mailto:francisco@twoplustwoone.dev"
NOTIFICATION_SAME_DAY_DELIVERY = "true"

[env.production.triggers]
crons = ["*/15 * * * *"]

[[env.production.d1_databases]]
binding = "DB"
database_name = "word_of_the_day"
database_id = "64dfba7a-5c38-4dcb-b111-ebe6f89f4d33"
migrations_dir = "migrations"

[[env.production.kv_namespaces]]
binding = "KV"
id = "09c68a2322be4cab9ef0dc751895ab7f"

[observability]
[observability.logs]
enabled = true
invocation_logs = true

[observability.traces]
enabled = true
